{"ast":null,"code":"import _defineProperty from\"/home/nanaji/Myworks/Cricket/frtd_cricket/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/nanaji/Myworks/Cricket/frtd_cricket/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/nanaji/Myworks/Cricket/frtd_cricket/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/nanaji/Myworks/Cricket/frtd_cricket/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/nanaji/Myworks/Cricket/frtd_cricket/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/nanaji/Myworks/Cricket/frtd_cricket/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import TeamComponent from\"./TeamComponent\";import TeamFormComponent from\"./TeamFormComponent\";var Team=/*#__PURE__*/function(_Component){_inherits(Team,_Component);var _super=_createSuper(Team);function Team(){var _this;_classCallCheck(this,Team);_this=_super.call(this);_this.getCookie=function(name){var cookieValue=null;if(document.cookie&&document.cookie!==''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=cookies[i].trim();// Does this cookie string begin with the name we want?\nif(cookie.substring(0,name.length+1)===name+'='){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;};_this.fetchTeams=function(){fetch(\"http://127.0.0.1:8000/team/\").then(function(res){return res.json();}).then(function(data){console.log(data);_this.setState({teamsData:data});_this.setState({dataLoaded:true});});};_this.handleChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState({teamFields:_objectSpread(_objectSpread({},_this.state.teamFields),{},_defineProperty({},name,value))});};_this.handleSubmit=function(event){event.preventDefault();var csrftoken=_this.getCookie(\"csrftoken\");var team_name=_this.state.teamFields.team_name;var team_rank=_this.state.teamFields.team_rank;var url=\"http://127.0.0.1:8000/team/\";var metd=\"POST\";if(_this.state.editing){url=\"http://127.0.0.1:8000/team/\".concat(_this.state.teamFields.id,\"/\");metd=\"PUT\";_this.setState({editing:false});}fetch(url,{method:metd,headers:{\"Content-type\":\"application/json\",\"X-CSRFToken\":csrftoken},body:JSON.stringify({team_name:team_name,team_rank:team_rank})}).then(function(res){_this.setState({teamFields:{team_name:\"\",team_rank:\"\"}});_this.fetchTeams();}).catch(function(error){return console.log(error);});};_this.editTeam=function(event){_this.setState({teamFields:{id:event.id,team_name:event.team_name,team_rank:event.team_rank},editing:true});};_this.deleteTeam=function(event){var url=\"http://127.0.0.1:8000/team/\".concat(event.id,\"/\");fetch(url,{method:\"DELETE\",headers:{\"Content-type\":\"application/json\"}}).then(function(res){_this.fetchTeams();}).catch(function(error){return console.log(error);});};_this.getTeam=function(event){fetch(\"http://127.0.0.1:8000/team/\".concat(event.id,\"/\")).then(function(res){return res.json();}).then(function(data){// console.log(data);\n_this.setState({dataLoaded:true,getSpeTeam:true,teamsData:data,teamFields:{id:event.id}});});};_this.state={teamsData:[],dataLoaded:false,getSpeTeam:false,teamFields:{id:\"\",team_name:\"\",team_rank:\"\"},editing:false};return _this;}_createClass(Team,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchTeams();}},{key:\"render\",value:function render(){var _this2=this;var teamDataDisplay=this.state.dataLoaded&&!this.state.getSpeTeam&&this.state.teamsData.map(function(data){return/*#__PURE__*/React.createElement(TeamComponent,{key:data.id,data:data,editTeam:function editTeam(){return _this2.editTeam(data);},deleteTeam:function deleteTeam(){return _this2.deleteTeam(data);},getTeam:function getTeam(){return _this2.getTeam(data);}});});return/*#__PURE__*/React.createElement(\"div\",{id:\"team\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container mb-10\"},this.state.getSpeTeam?/*#__PURE__*/React.createElement(TeamComponent,{key:this.state.teamFields.id,data:this.state.teamsData,editTeam:function editTeam(){return _this2.editTeam(_this2.state.teamsData);},deleteTeam:function deleteTeam(){return _this2.deleteTeam(_this2.state.teamsData);},getTeam:function getTeam(){return _this2.getTeam(_this2.state.teamsData);}}):!this.state.dataLoaded?/*#__PURE__*/React.createElement(\"h1\",null,\"Loading...\"):teamDataDisplay),/*#__PURE__*/React.createElement(TeamFormComponent,Object.assign({handleChange:this.handleChange,handleSubmit:this.handleSubmit},this.state)));}}]);return Team;}(Component);export default Team;","map":{"version":3,"sources":["/home/nanaji/Myworks/Cricket/frtd_cricket/src/components/Team.js"],"names":["React","Component","TeamComponent","TeamFormComponent","Team","getCookie","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","fetchTeams","fetch","then","res","json","data","console","log","setState","teamsData","dataLoaded","handleChange","event","target","value","teamFields","state","handleSubmit","preventDefault","csrftoken","team_name","team_rank","url","metd","editing","id","method","headers","body","JSON","stringify","catch","error","editTeam","deleteTeam","getTeam","getSpeTeam","teamDataDisplay","map"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport TeamComponent from \"./TeamComponent\";\nimport TeamFormComponent from \"./TeamFormComponent\";\n\nclass Team extends Component\n{\n    constructor()\n    {\n        super();\n        this.state = {\n            teamsData: [],\n            dataLoaded: false,\n            getSpeTeam: false,\n            teamFields: {\n                id: \"\",\n                team_name: \"\",\n                team_rank: \"\",\n            },\n            editing: false\n        };\n    }\n\n    getCookie = (name) => \n    {\n        var cookieValue = null;\n        if (document.cookie && document.cookie !== '')\n        {\n            var cookies = document.cookie.split(';');\n            for (var i = 0; i < cookies.length; i++)\n            {\n                var cookie = cookies[i].trim();\n                // Does this cookie string begin with the name we want?\n                if (cookie.substring(0, name.length + 1) === (name + '='))\n                {\n                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                    break;\n                }\n            }\n        }\n        return cookieValue;\n    };\n\n    componentDidMount ()\n    {\n        this.fetchTeams();\n    }\n\n    fetchTeams = () =>\n    {\n        fetch(\"http://127.0.0.1:8000/team/\")\n            .then(res => res.json())\n            .then(data =>\n            {\n                console.log(data);\n                this.setState({ teamsData: data });\n                this.setState({ dataLoaded: true });\n            });\n    };\n\n    handleChange = (event) =>\n    {\n        const { name, value } = event.target;\n        this.setState({\n            teamFields: {\n                ...this.state.teamFields,\n                [name]: value\n            }\n        });\n    };\n\n    handleSubmit = (event) =>\n    {\n        event.preventDefault();\n        let csrftoken = this.getCookie(\"csrftoken\");\n        let team_name = this.state.teamFields.team_name;\n        let team_rank = this.state.teamFields.team_rank;\n\n        let url = \"http://127.0.0.1:8000/team/\";\n        let metd = \"POST\";\n\n        if (this.state.editing)\n        {\n            url = `http://127.0.0.1:8000/team/${this.state.teamFields.id}/`;\n            metd = \"PUT\";\n            this.setState({ editing: false });\n        }\n\n        fetch(url, {\n            method: metd,\n            headers: {\n                \"Content-type\": \"application/json\",\n                \"X-CSRFToken\": csrftoken\n            },\n            body: JSON.stringify({ team_name: team_name, team_rank: team_rank })\n        })\n            .then(res =>\n            {\n                this.setState({\n                    teamFields: {\n                        team_name: \"\",\n                        team_rank: \"\",\n                    }\n                });\n                this.fetchTeams();\n            })\n            .catch(error => console.log(error));\n\n    };\n\n    editTeam = (event) =>\n    {\n        this.setState({\n            teamFields: {\n                id: event.id,\n                team_name: event.team_name,\n                team_rank: event.team_rank\n            },\n            editing: true\n        });\n    };\n\n    deleteTeam = (event) =>\n    {\n\n        let url = `http://127.0.0.1:8000/team/${event.id}/`;\n        fetch(url, {\n            method: \"DELETE\",\n            headers: {\n                \"Content-type\": \"application/json\"\n            }\n        })\n            .then(res =>\n            {\n                this.fetchTeams();\n            })\n            .catch(error => console.log(error));\n    };\n\n    getTeam = (event) =>\n    {\n        fetch(`http://127.0.0.1:8000/team/${event.id}/`)\n            .then(res => res.json())\n            .then(data =>\n            {\n                // console.log(data);\n                this.setState({\n                    dataLoaded: true,\n                    getSpeTeam: true,\n                    teamsData: data,\n                    teamFields: {\n                        id: event.id\n                    }\n                });\n            });\n    };\n\n\n    render ()\n    {\n        const teamDataDisplay = this.state.dataLoaded && !this.state.getSpeTeam &&\n            this.state.teamsData.map(data =>\n                <TeamComponent key={ data.id } data={ data }\n                    editTeam={ () => this.editTeam(data) }\n                    deleteTeam={ () => this.deleteTeam(data) }\n                    getTeam={ () => this.getTeam(data) }\n                />\n            );\n\n        return (\n\n            <div id=\"team\">\n\n                <div className=\"container mb-10\"> \n                    { this.state.getSpeTeam ?\n                        <TeamComponent key={ this.state.teamFields.id }\n                            data={ this.state.teamsData }\n                            editTeam={ () => this.editTeam(this.state.teamsData) }\n                            deleteTeam={ () => this.deleteTeam(this.state.teamsData) }\n                            getTeam={ () => this.getTeam(this.state.teamsData) }\n                        /> :\n                        !this.state.dataLoaded ? <h1>Loading...</h1> :\n                            teamDataDisplay }\n                </div>\n\n                <TeamFormComponent\n                    handleChange={ this.handleChange }\n                    handleSubmit={ this.handleSubmit }\n                    { ...this.state }\n                />\n\n\n            </div>\n        );\n    }\n}\n\nexport default Team;"]},"metadata":{},"sourceType":"module"}