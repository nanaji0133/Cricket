{"ast":null,"code":"var _jsxFileName = \"/home/nanaji/Myworks/frtd_cricket/src/components/Team.js\";\nimport React, { Component } from \"react\";\nimport TeamComponent from \"./TeamComponent\";\nimport TeamFormComponent from \"./TeamFormComponent\";\n\nclass Team extends Component {\n  constructor() {\n    super();\n\n    this.getCookie = name => {\n      var cookieValue = null;\n\n      if (document.cookie && document.cookie !== '') {\n        var cookies = document.cookie.split(';');\n\n        for (var i = 0; i < cookies.length; i++) {\n          var cookie = cookies[i].trim(); // Does this cookie string begin with the name we want?\n\n          if (cookie.substring(0, name.length + 1) === name + '=') {\n            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n            break;\n          }\n        }\n      }\n\n      return cookieValue;\n    };\n\n    this.fetchTeams = () => {\n      fetch(\"http://127.0.0.1:8000/team/\").then(res => res.json()).then(data => {\n        console.log(data);\n        this.setState({\n          teamsData: data\n        });\n        this.setState({\n          dataLoaded: true\n        });\n      });\n    };\n\n    this.handleChange = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      this.setState({\n        teamFields: { ...this.state.teamFields,\n          [name]: value\n        }\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      let csrftoken = this.getCookie(\"csrftoken\");\n      let team_name = this.state.teamFields.team_name;\n      let team_rank = this.state.teamFields.team_rank;\n      let url = \"http://127.0.0.1:8000/team/\";\n      let metd = \"POST\";\n\n      if (this.state.editing) {\n        url = `http://127.0.0.1:8000/team/${this.state.teamFields.id}/`;\n        metd = \"PUT\";\n        this.setState({\n          editing: false\n        });\n      }\n\n      fetch(url, {\n        method: metd,\n        headers: {\n          \"Content-type\": \"application/json\",\n          \"X-CSRFToken\": csrftoken\n        },\n        body: JSON.stringify({\n          team_name: team_name,\n          team_rank: team_rank\n        })\n      }).then(res => {\n        this.setState({\n          teamFields: {\n            team_name: \"\",\n            team_rank: \"\"\n          }\n        });\n        this.fetchTeams();\n      }).catch(error => console.log(error));\n    };\n\n    this.editTeam = event => {\n      this.setState({\n        teamFields: {\n          id: event.id,\n          team_name: event.team_name,\n          team_rank: event.team_rank\n        },\n        editing: true\n      });\n    };\n\n    this.deleteTeam = event => {\n      let url = `http://127.0.0.1:8000/team/${event.id}/`;\n      fetch(url, {\n        method: \"DELETE\",\n        headers: {\n          \"Content-type\": \"application/json\"\n        }\n      }).then(res => {\n        this.fetchTeams();\n      }).catch(error => console.log(error));\n    };\n\n    this.getTeam = event => {\n      fetch(`http://127.0.0.1:8000/team/${event.id}/`).then(res => res.json()).then(data => {\n        // console.log(data);\n        this.setState({\n          dataLoaded: true,\n          getSpeTeam: true,\n          teamsData: data,\n          teamFields: {\n            id: event.id\n          }\n        });\n      });\n    };\n\n    this.state = {\n      teamsData: [],\n      dataLoaded: false,\n      getSpeTeam: false,\n      teamFields: {\n        id: \"\",\n        team_name: \"\",\n        team_rank: \"\"\n      },\n      editing: false\n    };\n  }\n\n  componentDidMount() {\n    this.fetchTeams();\n  }\n\n  render() {\n    const teamDataDisplay = this.state.dataLoaded && !this.state.getSpeTeam && this.state.teamsData.map(data => /*#__PURE__*/React.createElement(TeamComponent, {\n      key: data.id,\n      data: data,\n      editTeam: () => this.editTeam(data),\n      deleteTeam: () => this.deleteTeam(data),\n      getTeam: () => this.getTeam(data),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"team\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container mb-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }\n    }, this.state.getSpeTeam ? /*#__PURE__*/React.createElement(TeamComponent, {\n      key: this.state.teamFields.id,\n      data: this.state.teamsData,\n      editTeam: () => this.editTeam(this.state.teamsData),\n      deleteTeam: () => this.deleteTeam(this.state.teamsData),\n      getTeam: () => this.getTeam(this.state.teamsData),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 25\n      }\n    }) : !this.state.dataLoaded ? /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 50\n      }\n    }, \"Loading...\") : teamDataDisplay), /*#__PURE__*/React.createElement(TeamFormComponent, Object.assign({\n      handleChange: this.handleChange,\n      handleSubmit: this.handleSubmit\n    }, this.state, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    })));\n  }\n\n}\n\nexport default Team;","map":{"version":3,"sources":["/home/nanaji/Myworks/frtd_cricket/src/components/Team.js"],"names":["React","Component","TeamComponent","TeamFormComponent","Team","constructor","getCookie","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","fetchTeams","fetch","then","res","json","data","console","log","setState","teamsData","dataLoaded","handleChange","event","value","target","teamFields","state","handleSubmit","preventDefault","csrftoken","team_name","team_rank","url","metd","editing","id","method","headers","body","JSON","stringify","catch","error","editTeam","deleteTeam","getTeam","getSpeTeam","componentDidMount","render","teamDataDisplay","map"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport TeamComponent from \"./TeamComponent\";\nimport TeamFormComponent from \"./TeamFormComponent\";\n\nclass Team extends Component\n{\n    constructor()\n    {\n        super();\n        this.state = {\n            teamsData: [],\n            dataLoaded: false,\n            getSpeTeam: false,\n            teamFields: {\n                id: \"\",\n                team_name: \"\",\n                team_rank: \"\",\n            },\n            editing: false\n        };\n    }\n\n    getCookie = (name) => \n    {\n        var cookieValue = null;\n        if (document.cookie && document.cookie !== '')\n        {\n            var cookies = document.cookie.split(';');\n            for (var i = 0; i < cookies.length; i++)\n            {\n                var cookie = cookies[i].trim();\n                // Does this cookie string begin with the name we want?\n                if (cookie.substring(0, name.length + 1) === (name + '='))\n                {\n                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                    break;\n                }\n            }\n        }\n        return cookieValue;\n    };\n\n    componentDidMount ()\n    {\n        this.fetchTeams();\n    }\n\n    fetchTeams = () =>\n    {\n        fetch(\"http://127.0.0.1:8000/team/\")\n            .then(res => res.json())\n            .then(data =>\n            {\n                console.log(data);\n                this.setState({ teamsData: data });\n                this.setState({ dataLoaded: true });\n            });\n    };\n\n    handleChange = (event) =>\n    {\n        const { name, value } = event.target;\n        this.setState({\n            teamFields: {\n                ...this.state.teamFields,\n                [name]: value\n            }\n        });\n    };\n\n    handleSubmit = (event) =>\n    {\n        event.preventDefault();\n        let csrftoken = this.getCookie(\"csrftoken\");\n        let team_name = this.state.teamFields.team_name;\n        let team_rank = this.state.teamFields.team_rank;\n\n        let url = \"http://127.0.0.1:8000/team/\";\n        let metd = \"POST\";\n\n        if (this.state.editing)\n        {\n            url = `http://127.0.0.1:8000/team/${this.state.teamFields.id}/`;\n            metd = \"PUT\";\n            this.setState({ editing: false });\n        }\n\n        fetch(url, {\n            method: metd,\n            headers: {\n                \"Content-type\": \"application/json\",\n                \"X-CSRFToken\": csrftoken\n            },\n            body: JSON.stringify({ team_name: team_name, team_rank: team_rank })\n        })\n            .then(res =>\n            {\n                this.setState({\n                    teamFields: {\n                        team_name: \"\",\n                        team_rank: \"\",\n                    }\n                });\n                this.fetchTeams();\n            })\n            .catch(error => console.log(error));\n\n    };\n\n    editTeam = (event) =>\n    {\n        this.setState({\n            teamFields: {\n                id: event.id,\n                team_name: event.team_name,\n                team_rank: event.team_rank\n            },\n            editing: true\n        });\n    };\n\n    deleteTeam = (event) =>\n    {\n\n        let url = `http://127.0.0.1:8000/team/${event.id}/`;\n        fetch(url, {\n            method: \"DELETE\",\n            headers: {\n                \"Content-type\": \"application/json\"\n            }\n        })\n            .then(res =>\n            {\n                this.fetchTeams();\n            })\n            .catch(error => console.log(error));\n    };\n\n    getTeam = (event) =>\n    {\n        fetch(`http://127.0.0.1:8000/team/${event.id}/`)\n            .then(res => res.json())\n            .then(data =>\n            {\n                // console.log(data);\n                this.setState({\n                    dataLoaded: true,\n                    getSpeTeam: true,\n                    teamsData: data,\n                    teamFields: {\n                        id: event.id\n                    }\n                });\n            });\n    };\n\n\n    render ()\n    {\n        const teamDataDisplay = this.state.dataLoaded && !this.state.getSpeTeam &&\n            this.state.teamsData.map(data =>\n                <TeamComponent key={ data.id } data={ data }\n                    editTeam={ () => this.editTeam(data) }\n                    deleteTeam={ () => this.deleteTeam(data) }\n                    getTeam={ () => this.getTeam(data) }\n                />\n            );\n\n        return (\n\n            <div id=\"team\">\n\n                <div className=\"container mb-10\">\n\n                    { this.state.getSpeTeam ?\n                        <TeamComponent key={ this.state.teamFields.id }\n                            data={ this.state.teamsData }\n                            editTeam={ () => this.editTeam(this.state.teamsData) }\n                            deleteTeam={ () => this.deleteTeam(this.state.teamsData) }\n                            getTeam={ () => this.getTeam(this.state.teamsData) }\n                        /> :\n                        !this.state.dataLoaded ? <h1>Loading...</h1>\n                            : teamDataDisplay }\n\n\n\n                </div>\n\n                <TeamFormComponent\n                    handleChange={ this.handleChange }\n                    handleSubmit={ this.handleSubmit }\n                    { ...this.state }\n                />\n\n\n            </div>\n        );\n    }\n}\n\nexport default Team;"]},"metadata":{},"sourceType":"module"}