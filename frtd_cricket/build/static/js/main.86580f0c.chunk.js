(this.webpackJsonpfrtd_cricket=this.webpackJsonpfrtd_cricket||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(0),m=a.n(n),r=a(8),i=a.n(r),c=a(1),o=a(2),l=a(4),s=a(3);a(14);var d=function(){return m.a.createElement("div",{className:"footer fixed-bottom",id:"my-footer"},"Developed Nanaji Sanka")},u=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return m.a.createElement("nav",{className:"navbar fixed-top navbar-dark bg-dark",id:"my-nav"},m.a.createElement("h1",{className:"navbar-brand"},"Teams"))}}]),a}(n.Component),h=a(5),f=a(6);var p=function(e){var t=e.data.players.map((function(e){return m.a.createElement("li",{key:e.toString()}," ",e)}));return m.a.createElement("div",{className:"container p-2 m-2"},m.a.createElement("h1",{onClick:e.getTeam},"team name: ",e.data.team_name," "),m.a.createElement("h4",null,"rank: ",e.data.team_rank),m.a.createElement("h5",null,"Players "),m.a.createElement("ul",null,0==!t.length?t:"no players"),m.a.createElement("button",{className:"btn btn-primary btn-sm p-2 mb-2",id:"my-btn",onClick:e.editTeam},"Edit"),m.a.createElement("button",{className:"btn btn-dark btn-sm p-2 mb-2 ml-1",id:"my-btn",onClick:e.deleteTeam},"Delete"))};var b=function(e){return m.a.createElement("form",{id:"my-form",onSubmit:e.handleSubmit},m.a.createElement("div",{className:"form-group m-1"},m.a.createElement("input",{type:"text",className:"form-control col-4",id:"formGroupExampleInput",placeholder:"team name",name:"team_name",value:e.teamFields.team_name,onChange:e.handleChange})),m.a.createElement("div",{className:"form-group m-1"},m.a.createElement("input",{type:"number",className:"form-control col-4",id:"formGroupExampleInput",placeholder:"team rank",name:"team_rank",value:e.teamFields.team_rank,onChange:e.handleChange})),m.a.createElement("button",{className:"btn btn-primary m-1"},"Submit"))},g=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).getCookie=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var m=a[n].trim();if(m.substring(0,e.length+1)===e+"="){t=decodeURIComponent(m.substring(e.length+1));break}}return t},e.fetchTeams=function(){fetch("http://127.0.0.1:8000/team/").then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({teamsData:t}),e.setState({dataLoaded:!0})}))},e.handleChange=function(t){var a=t.target,n=a.name,m=a.value;e.setState({teamFields:Object(f.a)(Object(f.a)({},e.state.teamFields),{},Object(h.a)({},n,m))})},e.handleSubmit=function(t){t.preventDefault();var a=e.getCookie("csrftoken"),n=e.state.teamFields.team_name,m=e.state.teamFields.team_rank,r="http://127.0.0.1:8000/team/",i="POST";e.state.editing&&(r="http://127.0.0.1:8000/team/".concat(e.state.teamFields.id,"/"),i="PUT",e.setState({editing:!1})),fetch(r,{method:i,headers:{"Content-type":"application/json","X-CSRFToken":a},body:JSON.stringify({team_name:n,team_rank:m})}).then((function(t){e.setState({teamFields:{team_name:"",team_rank:""}}),e.fetchTeams()})).catch((function(e){return console.log(e)}))},e.editTeam=function(t){e.setState({teamFields:{id:t.id,team_name:t.team_name,team_rank:t.team_rank},editing:!0})},e.deleteTeam=function(t){var a="http://127.0.0.1:8000/team/".concat(t.id,"/");fetch(a,{method:"DELETE",headers:{"Content-type":"application/json"}}).then((function(t){e.fetchTeams()})).catch((function(e){return console.log(e)}))},e.getTeam=function(t){fetch("http://127.0.0.1:8000/team/".concat(t.id,"/")).then((function(e){return e.json()})).then((function(a){e.setState({dataLoaded:!0,getSpeTeam:!0,teamsData:a,teamFields:{id:t.id}})}))},e.state={teamsData:[],dataLoaded:!1,getSpeTeam:!1,teamFields:{id:"",team_name:"",team_rank:""},editing:!1},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.fetchTeams()}},{key:"render",value:function(){var e=this,t=this.state.dataLoaded&&!this.state.getSpeTeam&&this.state.teamsData.map((function(t){return m.a.createElement(p,{key:t.id,data:t,editTeam:function(){return e.editTeam(t)},deleteTeam:function(){return e.deleteTeam(t)},getTeam:function(){return e.getTeam(t)}})}));return m.a.createElement("div",{id:"team"},m.a.createElement("div",{className:"container mb-10"},this.state.getSpeTeam?m.a.createElement(p,{key:this.state.teamFields.id,data:this.state.teamsData,editTeam:function(){return e.editTeam(e.state.teamsData)},deleteTeam:function(){return e.deleteTeam(e.state.teamsData)},getTeam:function(){return e.getTeam(e.state.teamsData)}}):this.state.dataLoaded?t:m.a.createElement("h1",null,"Loading...")),m.a.createElement("a",{href:"http://127.0.0.1:8000/team/"},"testing"),m.a.createElement(b,Object.assign({handleChange:this.handleChange,handleSubmit:this.handleSubmit},this.state)))}}]),a}(n.Component),k=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return m.a.createElement("div",{className:"container"},m.a.createElement(u,null),m.a.createElement(g,null),m.a.createElement(d,null))}}]),a}(n.Component);i.a.render(m.a.createElement(k,null),document.getElementById("root"))},9:function(e,t,a){e.exports=a(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.86580f0c.chunk.js.map